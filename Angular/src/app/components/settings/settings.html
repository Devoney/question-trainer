<div class="settings">
  <h4 class="settings-title">{{ 'settings.title' | transloco }}</h4>
  <p class="settings-description">{{ 'settings.description' | transloco }}</p>

  <div class="settings-section">
    <label class="settings-label">
      <span>{{ 'settings.ollamaBaseUrlLabel' | transloco }}</span>
      <input
        type="text"
        [placeholder]="'settings.ollamaBaseUrlPlaceholder' | transloco"
        [value]="baseEndpoint"
        (input)="updateBaseEndpoint($event)"
      />
    </label>
    <small class="settings-help">{{ 'settings.ollamaBaseUrlHelp' | transloco }}</small>
  </div>

  <div class="settings-section">
    <label class="settings-label">
      <span>{{ 'settings.ollamaOcrUrlLabel' | transloco }}</span>
      <input
        type="text"
        [placeholder]="'settings.ollamaOcrUrlPlaceholder' | transloco"
        [value]="ocrEndpoint"
        (input)="updateOcrEndpoint($event)"
      />
    </label>
    <small class="settings-help">{{ 'settings.ollamaOcrUrlHelp' | transloco }}</small>
  </div>

  <div class="settings-section">
    <label class="settings-label">
      <span>{{ 'settings.aiGradingModelLabel' | transloco }}</span>
      <select
        [disabled]="modelsLoading || !availableModels.length"
        [(ngModel)]="aiGradingModel"
        (ngModelChange)="updateAiGradingModel($event)"
      >
        @if (!availableModels.length) {
          <option value="">{{ 'settings.modelsEmpty' | transloco }}</option>
        }
        @for (model of availableModels; track model) {
          <option [value]="model">{{ model }}</option>
        }
      </select>
    </label>
  </div>

  <div class="settings-section">
    <label class="settings-label">
      <span>{{ 'settings.ocrModelLabel' | transloco }}</span>
      <select
        [disabled]="modelsLoading || !availableModels.length"
        [(ngModel)]="ocrModel"
        (ngModelChange)="updateOcrModel($event)"
      >
        @if (!availableModels.length) {
          <option value="">{{ 'settings.modelsEmpty' | transloco }}</option>
        }
        @for (model of availableModels; track model) {
          <option [value]="model">{{ model }}</option>
        }
      </select>
    </label>
  </div>

  <div class="settings-section">
    <label class="settings-label">
      <span>{{ 'settings.qaModelLabel' | transloco }}</span>
      <select
        [disabled]="modelsLoading || !availableModels.length"
        [(ngModel)]="qaModel"
        (ngModelChange)="updateQaModel($event)"
      >
        @if (!availableModels.length) {
          <option value="">{{ 'settings.modelsEmpty' | transloco }}</option>
        }
        @for (model of availableModels; track model) {
          <option [value]="model">{{ model }}</option>
        }
      </select>
    </label>
  </div>
</div>

@if (modelsLoading) {
  <div class="settings-status">{{ 'settings.modelsLoading' | transloco }}</div>
} @else if (modelsError) {
  <div class="settings-status settings-status-error">{{ 'settings.modelsError' | transloco }}</div>
}
