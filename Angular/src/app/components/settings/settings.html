<div class="text-start">
  <h4 class="mb-1">{{ 'settings.title' | transloco }}</h4>
  <p class="mb-3 text-muted">{{ 'settings.description' | transloco }}</p>

  <mat-form-field appearance="outline" class="w-100 mb-3">
    <mat-label>{{ 'settings.ollamaBaseUrlLabel' | transloco }}</mat-label>
    <input
      matInput
      type="text"
      [placeholder]="'settings.ollamaBaseUrlPlaceholder' | transloco"
      [value]="baseEndpoint"
      (input)="updateBaseEndpoint($event)"
    />
    <mat-hint>{{ 'settings.ollamaBaseUrlHelp' | transloco }}</mat-hint>
  </mat-form-field>

  <mat-form-field appearance="outline" class="w-100 mb-3">
    <mat-label>{{ 'settings.ollamaOcrUrlLabel' | transloco }}</mat-label>
    <input
      matInput
      type="text"
      [placeholder]="'settings.ollamaOcrUrlPlaceholder' | transloco"
      [value]="ocrEndpoint"
      (input)="updateOcrEndpoint($event)"
    />
    <mat-hint>{{ 'settings.ollamaOcrUrlHelp' | transloco }}</mat-hint>
  </mat-form-field>

  <mat-form-field appearance="outline" class="w-100 mb-3">
    <mat-label>{{ 'settings.aiGradingModelLabel' | transloco }}</mat-label>
    <mat-select
      [disabled]="modelsLoading || !availableModels.length"
      [(ngModel)]="aiGradingModel"
      (ngModelChange)="updateAiGradingModel($event)"
    >
      @if (!availableModels.length) {
        <mat-option value="">{{ 'settings.modelsEmpty' | transloco }}</mat-option>
      }
      @for (model of availableModels; track model) {
        <mat-option [value]="model">{{ model }}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline" class="w-100 mb-3">
    <mat-label>{{ 'settings.ocrModelLabel' | transloco }}</mat-label>
    <mat-select
      [disabled]="modelsLoading || !availableModels.length"
      [(ngModel)]="ocrModel"
      (ngModelChange)="updateOcrModel($event)"
    >
      @if (!availableModels.length) {
        <mat-option value="">{{ 'settings.modelsEmpty' | transloco }}</mat-option>
      }
      @for (model of availableModels; track model) {
        <mat-option [value]="model">{{ model }}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline" class="w-100 mb-3">
    <mat-label>{{ 'settings.qaModelLabel' | transloco }}</mat-label>
    <mat-select
      [disabled]="modelsLoading || !availableModels.length"
      [(ngModel)]="qaModel"
      (ngModelChange)="updateQaModel($event)"
    >
      @if (!availableModels.length) {
        <mat-option value="">{{ 'settings.modelsEmpty' | transloco }}</mat-option>
      }
      @for (model of availableModels; track model) {
        <mat-option [value]="model">{{ model }}</mat-option>
      }
    </mat-select>
  </mat-form-field>
</div>

@if (modelsLoading) {
  <div class="mt-2 small text-muted">{{ 'settings.modelsLoading' | transloco }}</div>
} @else if (modelsError) {
  <div class="mt-2 small text-danger">{{ 'settings.modelsError' | transloco }}</div>
}
